{% extends "base.html" %}
{% load tz %}
{% load staticfiles %}
{# Block HOME #}
{% block content %}
<!-- STATISTICS SECTION-->
<section id="stat_section">
  <div class="container">
    <div class="row centeredrow">
      <!-- First block-->
      <div class="whiteblock col-xs-12 col-sm-4">
        <div class="row">
          <div class="col-md-3"><img src="{% static 'media/icon_medic.svg' %}" alt=""></div>
          <div class="col-md-9">
            <p id="total_medic">39</p>
            <p>Total de médicos</p>
          </div>
        </div>
      </div>
      <!-- Second Block-->
      <div class="whiteblock col-xs-12 col-sm-4">
        <div class="row">
          <div class="col-md-3"><img src="{% static 'media/icon_day.svg' %}" alt=""></div>
          <div class="col-md-9">
            <p id="prescriptday">270</p>
            <p>Prescripciones / día</p>
          </div>
        </div>
      </div>
      <!-- Third Block-->
      <div class="whiteblock col-xs-12 col-sm-4">
        <div class="row">
          <div class="col-md-3"><img src="{% static 'media/icon_month.svg' %}" alt=""></div>
          <div class="col-md-9">
            <p id="prescriptmonth">8123</p>
            <p>Prescripciones / mes</p>
          </div>
        </div>
      </div>
    </div> <!--Closing main row-->
  </div> <!-- Closing container-->
</section>
<!-- Closing Statistic Section-->

<!-- Graphics section-->
<section id="stat_section">
  <div class="container">
    <div class="row centeredrow">
      <!-- First block-->
      <div class="col-md-4" id="infosearch" style="width:30%; margin-right:14px;">
        <div class="row">
          <div class="shadowbl_blue col-md-12" style="height:148px">
            <h2 style="color:#fff"><strong>
              <SCRIPT LANGUAGE="Javascript">
                <!--
                // Array of day names
                var dayNames = new Array("Domingo","Lunes","Martes","Miercoles",
                        "Jueves","Viernes","Sábado");

                // Array of month Names
                var monthNames = new Array(
                "Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio",
                "Agosto","Septiembre","Octubre","Noviembre","Diciembre");

                var now = new Date();
                document.write(dayNames[now.getDay()] + ", " +
                monthNames[now.getMonth()] + " " +
                now.getDate() + ", " + now.getFullYear());

                // -->
              </SCRIPT></strong>
            </h2>
          </div>
        </div>
        <div class="row">
          <div class="shadowbl col-md-12" style="height:150px">
            <h2>Busqueda</h2>
            <form method="GET" action="/hash" class="navbar-form navbar-left" role="search">
              <div class="form-group">
                <input type="text" class="form-control" name="hash_rx" placeholder="Tx Hash" required>
              </div>
              <button type="submit" id="search-block" class="btn btn-default">Buscar</button>
            </form>
          </div>
        </div>
      </div>
      <!-- Second Block-->
      <div class="shadowbl col-md-8" style="width:61%; height:310px; margin-right:0!important;">
        <div id="chartdiv" style="width: 95%; height: 280px; background-color: #FFFFFF;" ></div>
      </div>
    </div> <!--Closing main row-->
  </div> <!-- Closing container-->
</section>

<!-- Recent blocks Section-->
<section>
  <div class="container mainblock">
    <div class="row">
      <div class="col-xs-12">
        <h3>BLOCKS RECIENTES</h3>
        {# last 5 blocks #}
        <table id="crypto-table" class="table table-striped">
          <tr>
            <td>Tamaño</td>
            <td>Hash</td>
            <td class="text-center">Cuándo</td>
          </tr>
          {% for rx_block in rx_blocks %}
            <tr>
              <td><a class="a_purple" href="/block/{{ rx_block.hash_block }}/"> {{ rx_block.raw_size }} bytes</a></td>
              <td class="text-center hidden-xs"><a class="a_grey" href="/block/{{ rx_block.hash_block }}/">{{ rx_block.hash_block }}</a></td>
              <td class="text-center visible-xs-block hash_block-mobile"><a class="a_grey" href="/block/{{ rx_block.hash_block }}/">{{ rx_block.hash_block }}</a></td>
              <td class="text-center"><a class="a_green" href="/block/{{ rx_block.hash_block }}/"><span>{{ rx_block.timestamp|timezone:"America/Mexico_City"|timesince }}</span></a></td>
            </tr>
          {% endfor %}
        </table>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12">
        <h3>PRESCRIPCIONES RECIENTES</h3>
        {# last 5 rx #}
        <table id="crypto-table" class="table table-striped">
          <tr>
            <td>Tamaño</td>
            <td>Hash</td>
            <td class="text-center">Cuándo</td>
            </tr>
          {% for rx in prescriptions %}
          <tr>
            <td><a class="a_purple" href="/hash/{{ rx.rxid }}/"> {{ rx.raw_size }} bytes</a></td>
            <td class="text-center hidden-xs"><a class="a_grey" href="/hash/{{ rx.rxid }}/">{{ rx.rxid }}</a></td>
            <td class="text-center visible-xs-block signature-mobile"><a class="a_grey" href="/hash/{{ rx.rxid }}/">{{ rx.rxid }}</a></td>
            <td class="text-center"><a class="a_green" href="/hash/{{ rx.rxid }}/"><span>{{ rx.get_delta_datetime|timezone:"America/Mexico_City"|timesince }}</span></a></td>
          </tr>
          {% endfor %}
        </table>
      </div>
    </div>
  </div>
</section>
{% endblock content %}

{% block jsblock %}
    <!-- amCharts javascript sources -->
    <script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
    <script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>
    <script type="text/javascript" src="https://www.amcharts.com/lib/3/themes/light.js"></script>


    <!-- amCharts javascript code -->
    <script type="text/javascript">
      AmCharts.makeChart("chartdiv",
        {
          "type": "serial",
          "categoryField": "category",
          "plotAreaBorderColor": "#626262",
          "startDuration": 1,
          "startEffect": "easeOutSine",
          "color": "#626262",
          "theme": "light",
          "categoryAxis": {
            "gridPosition": "start",
            "axisColor": "#626262",
            "gridColor": "#626262"
          },
          "chartCursor": {
            "enabled": true,
            "cursorColor": "#626262"
          },
          "chartScrollbar": {
            "enabled": true,
            "backgroundColor": "#626262"
          },
          "trendLines": [],
          "graphs": [
            {
              "balloonText": "[[title]] of [[category]]:[[value]]",
              "bullet": "round",
              "id": "AmGraph-1",
              "title": "Rate",
              "valueField": "column-1"
            }
          ],
          "guides": [],
          "valueAxes": [
            {
              "id": "ValueAxis-1",
              "axisColor": "#626262",
              "title": "Hash/s"
            }
          ],
          "allLabels": [],
          "balloon": {
            "color": "#626262"
          },
          "titles": [
            {
              "id": "Title-1",
              "size": 15,
              "text": "Hash Rate"
            }
          ],
          "dataProvider": [
            {
              "category": "Ago.",
              "column-1": "6.3"
            },
            {
              "category": "Sep.",
              "column-1": "6.1"
            },
            {
              "category": "Oct.",
              "column-1": "8.1"
            },
            {
              "category": "Nov.",
              "column-1": "9.9"
            },
            {
              "category": "Dic.",
              "column-1": "11"
            },
            {
              "category": "Ene.",
              "column-1": "14"
            },
            {
              "category": "Feb.",
              "column-1": "20"
            },
            {
              "category": "Mar.",
              "column-1": "23"
            },
            {
              "category": "Abr.",
              "column-1": "25"
            },
            {
              "category": "May.",
              "column-1": "28"
            },
            {
              "category": "Jun.",
              "column-1": "35"
            },
            {
              "category": "Jul.",
              "column-1": "38"
            }
          ]
        }
      );
    </script>
{% endblock jsblock %}
